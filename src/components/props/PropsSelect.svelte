<script lang="ts">
	import Svelecte, { addFormatter } from 'svelecte';
	export let props;
    export let value;
    export let selection;
    export let selectionName;

    $: {
        selection;
        selectionName = selection ? 
        {
            select:{
                name: selection.text
            }
        } 
        : '';
    }

	const options = props.select.options.map(option => {
		return {
			value: option.id,
			text: option.name,
			color: option.color,
		};
	});

	function selectRenderer(item, isSelected) {
		if (isSelected) {
			return `
                <div class="select-item n-select-item n-select-${item.color.toLowerCase().replaceAll(' ', '-')}">
                    ${item.text}
                </div>
            `;
		}
			return `
                <div class="select-item n-select-item n-select-${item.color.toLowerCase().replaceAll(' ', '-')}">
                    ${item.text}
                </div>
            `;
	}
	addFormatter('color', selectRenderer);
</script>

<div class="input-container">
	<div class="input-label">
		<svg
			viewBox="0 0 14 14"
			class="typesSelect"
			style="width: 14px; height: 14px; display: block; fill: rgba(0, 0, 0, 0.443); flex-shrink: 0; backface-visibility: hidden;"
			><path
				d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z" /></svg>
		{props.name}
	</div>
	<Svelecte {options} renderer="color" clearable bind:readSelection={selection} bind:value={value} />
</div>

<style lang="less">

</style>